-- include "utils.lus"


node etat_init(A, B: bool) returns (etat: int);
let
  etat = if A then 1 else 
           if B then 2 else 0;
tel

node Portillon(A, B: bool) returns (alarm: bool);
var state :  int ;
let
  assert not( A and B );
  
state =  etat_init(A, B) -> if pre state = 0 and A then 1
                              else if pre state = 0 and B then 2
                                   else if pre state = 1 and B then 0
                                        else if pre state = 1 and A then 2
                                             else pre state;

  alarm = state = 2;

tel


node check_port(c: bool) returns (ok: bool);
var a, b: bool;
let
  a= true -> not pre a;
  b= false -> not pre b;
  ok = not Portillon(a, b);
tel